{"objects":[{"jobObject":{"JobType":".TransformationJob","id":593,"revision":2,"created":1639069008860,"timestamp":1639069008860,"components":{"599":{"id":599,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":224,"y":352,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[601,605],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"temperature"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"600":{"id":600,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":729,"y":164,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[650],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"6":{"slot":6,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":""}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"640":{"id":640,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":377,"y":436,"width":32,"height":32,"inputConnectorIDs":[605],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"200":{"slot":200,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"201":{"slot":201,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"202":{"slot":202,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"203":{"slot":203,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"204":{"slot":204,"name":"Target Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"target"}}}},"visible":true},"205":{"slot":205,"name":"Source Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"input"}}}},"visible":true},"206":{"slot":206,"name":"Join Expression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"target\".\"equipment_id\" = \"input\".\"equipment\" AND \"target\".\"ts\" = \"input\".\"ts\""},"2":{"slot":2,"type":"STRING","value":"Join"}}}},"visible":true},"207":{"slot":207,"name":"When Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"<none>"},"2":{"slot":2,"type":"STRING","value":"Update"}}}},"visible":true},"208":{"slot":208,"name":"Update Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}}},"visible":true},"209":{"slot":209,"name":"Include Not Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"210":{"slot":210,"name":"Insert Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"641":{"id":641,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":377,"y":276,"width":32,"height":32,"inputConnectorIDs":[601],"outputConnectorIDs":[602],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"642":{"id":642,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1744268877,"x":473,"y":276,"width":32,"height":32,"inputConnectorIDs":[602],"outputConnectorIDs":[606],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Distinct 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"643":{"id":643,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":569,"y":276,"width":32,"height":32,"inputConnectorIDs":[606],"outputConnectorIDs":[604],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"equipment\""},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"'Unknown'"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"'normal' /* Have to hardcode this value because it is not in the data */"},"2":{"slot":2,"type":"STRING","value":"fan_status"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"644":{"id":644,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":729,"y":276,"width":32,"height":32,"inputConnectorIDs":[650,604],"outputConnectorIDs":[649],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"},"2":{"slot":2,"type":"STRING","value":"fan"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"data\".\"fan_status\" = \"fan\".\"name\""},"2":{"slot":2,"type":"STRING","value":"data_Left_fan"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data.id"},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"data.name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan.fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"645":{"id":645,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":937,"y":276,"width":32,"height":32,"inputConnectorIDs":[649],"outputConnectorIDs":[603],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 1"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"NVL(\"fan_status_code\", -1)"},"2":{"slot":2,"type":"STRING","value":"fan_staus_code_with_default"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"646":{"id":646,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1033,"y":276,"width":32,"height":32,"inputConnectorIDs":[603],"outputConnectorIDs":[648],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_staus_code_with_default"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"647":{"id":647,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":1161,"y":276,"width":32,"height":32,"inputConnectorIDs":[648],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"200":{"slot":200,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"201":{"slot":201,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"202":{"slot":202,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"203":{"slot":203,"name":"Warehouse","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"204":{"slot":204,"name":"Target Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"target"}}}},"visible":true},"205":{"slot":205,"name":"Source Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"input"}}}},"visible":true},"206":{"slot":206,"name":"Join Expression","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"target\".\"equipment_id\" = \"input\".\"equipment_id\""},"2":{"slot":2,"type":"STRING","value":"Join"}}}},"visible":true},"207":{"slot":207,"name":"When Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"<none>"},"2":{"slot":2,"type":"STRING","value":"Update"}}}},"visible":true},"208":{"slot":208,"name":"Update Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true},"209":{"slot":209,"name":"Include Not Matched","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"210":{"slot":210,"name":"Insert Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"648":{"id":648,"sourceID":646,"targetID":647},"649":{"id":649,"sourceID":644,"targetID":645},"601":{"id":601,"sourceID":599,"targetID":641},"650":{"id":650,"sourceID":600,"targetID":644},"602":{"id":602,"sourceID":641,"targetID":642},"603":{"id":603,"sourceID":645,"targetID":646},"604":{"id":604,"sourceID":643,"targetID":644},"605":{"id":605,"sourceID":599,"targetID":640},"606":{"id":606,"sourceID":642,"targetID":643}},"canUndo":false,"undoCommand":"","undoCreated":-1,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"594":{"id":594,"x":341,"y":192,"width":278,"height":40,"text":"This is similar to handling a late-arriving dimension","colour":"00ce4f"},"595":{"id":595,"x":453,"y":415,"width":176,"height":50,"text":"This is a simple MERGE. It performs an idempotent change to the 3NF table.","colour":"00ce4f"},"596":{"id":596,"x":1109,"y":167,"width":123,"height":71,"text":"Not expecting many UPDATEs at this point, but they are handled if they do happen","colour":"00ce4f"},"597":{"id":597,"x":671,"y":101,"width":148,"height":252,"text":"Look up the fan status code.\nNote this is a **left** join","colour":"00ce4f"},"598":{"id":598,"x":896,"y":176,"width":177,"height":53,"text":"This is in case the left-join failed","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":593,"name":"example datamodel ODS to 3NF","description":"","type":"TRANSFORMATION","tag":"ad8e29c6-28e2-4b44-abf7-8cff15df32ff"},"path":["matillion-examples","datamodel","04 3NF"]}],"version":"1.48.3","environment":"snowflake"}