{"objects":[{"jobObject":{"JobType":".TransformationJob","id":1567,"revision":103,"created":1639499928525,"timestamp":1639499928525,"components":{"1576":{"id":1576,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":377,"y":276,"width":32,"height":32,"inputConnectorIDs":[4567],"outputConnectorIDs":[1584],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1577":{"id":1577,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1744268877,"x":473,"y":276,"width":32,"height":32,"inputConnectorIDs":[1584],"outputConnectorIDs":[1587],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Distinct 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1578":{"id":1578,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":569,"y":276,"width":32,"height":32,"inputConnectorIDs":[1587],"outputConnectorIDs":[1586],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"equipment\""},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"'Unknown'"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"'normal' /* Have to hardcode this value because it is not in the data */"},"2":{"slot":2,"type":"STRING","value":"fan_status"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1579":{"id":1579,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":729,"y":276,"width":32,"height":32,"inputConnectorIDs":[1586,4591],"outputConnectorIDs":[1589],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"},"2":{"slot":2,"type":"STRING","value":"fan"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"data\".\"fan_status\" = \"fan\".\"name\""},"2":{"slot":2,"type":"STRING","value":"data_Left_fan"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data.id"},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"data.name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan.fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1580":{"id":1580,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":937,"y":276,"width":32,"height":32,"inputConnectorIDs":[1589],"outputConnectorIDs":[1585],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 1"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(\"fan_status_code\", -1)"},"2":{"slot":2,"type":"STRING","value":"fan_staus_code_with_default"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1581":{"id":1581,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1033,"y":276,"width":32,"height":32,"inputConnectorIDs":[1585],"outputConnectorIDs":[4626],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_staus_code_with_default"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4545":{"id":4545,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":224,"y":352,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[4567,5975],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"temperature"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4574":{"id":4574,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":736,"y":160,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[4591],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4625":{"id":4625,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":1168,"y":272,"width":32,"height":32,"inputConnectorIDs":[4626],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"2":{"slot":2,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"3":{"slot":3,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true},"5":{"slot":5,"name":"Unique Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}}},"visible":true},"6":{"slot":6,"name":"Update Strategy","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update/Insert"}}}},"visible":true},"7":{"slot":7,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"5601":{"id":5601,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":896,"y":448,"width":32,"height":32,"inputConnectorIDs":[6087],"outputConnectorIDs":[6138],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Only New"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"existing_id"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"5621":{"id":5621,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":384,"y":512,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[6018],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Src norm_bubble_event"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"5971":{"id":5971,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":704,"y":448,"width":32,"height":32,"inputConnectorIDs":[6018,5975],"outputConnectorIDs":[6087],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Change detect"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"o"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Src norm_bubble_event"},"2":{"slot":2,"type":"STRING","value":"n"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"o\".\"ts\" = \"n\".\"ts\" AND \"o\".\"equipment\" = \"n\".\"equipment_id\""},"2":{"slot":2,"type":"STRING","value":"o_Left_n"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"o.ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"o.equipment"},"2":{"slot":2,"type":"STRING","value":"equipment"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.id"},"2":{"slot":2,"type":"STRING","value":"existing_id"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6109":{"id":6109,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":1072,"y":448,"width":32,"height":32,"inputConnectorIDs":[6138],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"3":{"slot":3,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Append"}}}},"visible":true},"6":{"slot":6,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"1584":{"id":1584,"sourceID":1576,"targetID":1577},"1585":{"id":1585,"sourceID":1580,"targetID":1581},"1586":{"id":1586,"sourceID":1578,"targetID":1579},"1587":{"id":1587,"sourceID":1577,"targetID":1578},"1589":{"id":1589,"sourceID":1579,"targetID":1580},"4567":{"id":4567,"sourceID":4545,"targetID":1576},"4591":{"id":4591,"sourceID":4574,"targetID":1579},"4626":{"id":4626,"sourceID":1581,"targetID":4625},"5975":{"id":5975,"sourceID":4545,"targetID":5971},"6018":{"id":6018,"sourceID":5621,"targetID":5971},"6087":{"id":6087,"sourceID":5971,"targetID":5601},"6138":{"id":6138,"sourceID":5601,"targetID":6109}},"canUndo":true,"undoCommand":"Move Components","undoCreated":1639499924328,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"1568":{"id":1568,"x":341,"y":192,"width":278,"height":40,"text":"This is similar to handling a late-arriving dimension","colour":"00ce4f"},"1570":{"id":1570,"x":1109,"y":167,"width":123,"height":71,"text":"Not expecting many UPDATEs at this point, but they are handled if they do happen","colour":"00ce4f"},"1571":{"id":1571,"x":671,"y":101,"width":148,"height":252,"text":"Look up the fan status code.\nNote this is a **left** join","colour":"00ce4f"},"1572":{"id":1572,"x":896,"y":176,"width":177,"height":53,"text":"This is in case the left-join failed","colour":"00ce4f"},"5611":{"id":5611,"x":1148,"y":417,"width":226,"height":68,"text":"This is a simple MERGE. It performs an idempotent change to the 3NF table.\nThere are no fields to update, so a Table Output in Append mode is sufficient.","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":1567,"name":"example datamodel ODS to 3NF","description":"","type":"TRANSFORMATION","tag":"a2ad47b6-a27a-41c6-a052-7c1ec73197ad"},"path":["matillion-examples","datamodel","04 3NF"]}],"version":"1.48.10","environment":"synapse"}