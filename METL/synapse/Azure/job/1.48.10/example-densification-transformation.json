{"objects":[{"jobObject":{"JobType":".TransformationJob","id":1930,"revision":7,"created":1639479543757,"timestamp":1639479543757,"components":{"1935":{"id":1935,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":896,"y":224,"width":32,"height":32,"inputConnectorIDs":[1904,1948,1950],"outputConnectorIDs":[1949],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Find missing dates"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Spine"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MinMax"},"2":{"slot":2,"type":"STRING","value":"mm"},"3":{"slot":3,"type":"STRING","value":"Inner"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"String to Date"},"2":{"slot":2,"type":"STRING","value":"o"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DATEADD(DAY, \"s\".\"sequence\", \"mm\".\"min_datevalue\") <= \"mm\".\"max_datevalue\""},"2":{"slot":2,"type":"STRING","value":"s_Inner_mm"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"\"o\".\"datevalue\" = DATEADD(DAY, \"s\".\"sequence\", \"mm\".\"min_datevalue\")"},"2":{"slot":2,"type":"STRING","value":"s_Left_o"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"s.sequence"},"2":{"slot":2,"type":"STRING","value":"sequence"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"mm.min_datevalue"},"2":{"slot":2,"type":"STRING","value":"start_date"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"o.datevalue"},"2":{"slot":2,"type":"STRING","value":"measurement_date"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"o.eur"},"2":{"slot":2,"type":"STRING","value":"EUR"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1936":{"id":1936,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1439414779,"x":768,"y":128,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[1948],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Spine"}}}},"visible":true},"2":{"slot":2,"name":"Starting Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"0"}}}},"visible":true},"3":{"slot":3,"name":"Increment Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"INTEGER","value":"1"}}}},"visible":true},"4":{"slot":4,"name":"End Value","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"5000"}}}},"visible":true},"5":{"slot":5,"name":"Output Column","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sequence"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1937":{"id":1937,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1024,"y":224,"width":32,"height":32,"inputConnectorIDs":[1949],"outputConnectorIDs":[1907],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add date"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DATEADD(DAY, \"sequence\", \"start_date\")"},"2":{"slot":2,"type":"STRING","value":"densified_date"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"CASE WHEN \"measurement_date\" IS NULL THEN NULL ELSE \"sequence\" END"},"2":{"slot":2,"type":"STRING","value":"gapseq"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1938":{"id":1938,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":640,"y":224,"width":32,"height":32,"inputConnectorIDs":[1902],"outputConnectorIDs":[1950,1903],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"String to Date"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"CONVERT(DATE, \"Timestamp\", 20)"},"2":{"slot":2,"type":"STRING","value":"datevalue"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1939":{"id":1939,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1344,"y":144,"width":32,"height":32,"inputConnectorIDs":[1908],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Last Known"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LAST_VALUE(\"EUR\") IGNORE NULLS OVER (ORDER BY \"datevalue\" ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW)"},"2":{"slot":2,"type":"STRING","value":"EUR_last_known"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1940":{"id":1940,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1184,"y":224,"width":32,"height":32,"inputConnectorIDs":[1907],"outputConnectorIDs":[1905,1908,1909,1910],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Renamer"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sequence"},"2":{"slot":2,"type":"STRING","value":"sequence"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"densified_date"},"2":{"slot":2,"type":"STRING","value":"datevalue"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"gapseq"},"2":{"slot":2,"type":"STRING","value":"gapseq"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"EUR"},"2":{"slot":2,"type":"STRING","value":"EUR"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1941":{"id":1941,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1344,"y":64,"width":32,"height":32,"inputConnectorIDs":[1905],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Zero Filled"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(\"EUR\", 0.0)"},"2":{"slot":2,"type":"STRING","value":"EUR_zero_filled"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1942":{"id":1942,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":609793074,"x":1344,"y":224,"width":32,"height":32,"inputConnectorIDs":[1909],"outputConnectorIDs":[1906],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rolling Mean"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datevalue"},"2":{"slot":2,"type":"STRING","value":"Asc"}}}},"visible":true},"5":{"slot":5,"name":"Lower Bound","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"offset preceding"}}}},"visible":true},"6":{"slot":6,"name":"Upper Bound","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"current row"}}}},"visible":true},"7":{"slot":7,"name":"Lower Bound Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"3"}}}},"visible":true},"8":{"slot":8,"name":"Upper Bound Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"3"}}}},"visible":false},"9":{"slot":9,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Average"},"2":{"slot":2,"type":"STRING","value":"EUR"},"3":{"slot":3,"type":"STRING","value":"EUR_rolling_mean"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1943":{"id":1943,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":1344,"y":384,"width":32,"height":32,"inputConnectorIDs":[1910],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Linear Backfill"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"WITH data AS (\nSELECT \"sequence\", \"datevalue\", \"gapseq\", \"EUR\",\n       LAST_VALUE(\"gapseq\") IGNORE NULLS OVER (ORDER BY \"datevalue\" ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS prior_gapseq,\n       FIRST_VALUE(\"gapseq\") IGNORE NULLS OVER (ORDER BY \"datevalue\" ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING) AS next_gapseq,\n       LAST_VALUE(\"EUR\") IGNORE NULLS OVER (ORDER BY \"datevalue\" ROWS BETWEEN UNBOUNDED PRECEDING AND CURRENT ROW) AS prior_EUR,\n       FIRST_VALUE(\"EUR\") IGNORE NULLS OVER (ORDER BY \"datevalue\" ROWS BETWEEN CURRENT ROW AND UNBOUNDED FOLLOWING) AS next_EUR\nFROM $T{Renamer})\nSELECT \"sequence\", \"datevalue\", \"gapseq\", \"EUR\",\n       CASE WHEN \"EUR\" IS NULL\n            THEN prior_EUR + ((next_EUR - prior_EUR) * (\"sequence\" - prior_gapseq) / (next_gapseq - prior_gapseq))\n            ELSE \"EUR\"\n       END AS \"EUR_linear_fill\"\nFROM data\nORDER BY \"sequence\" DESC"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1944":{"id":1944,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1456,"y":224,"width":32,"height":32,"inputConnectorIDs":[1906],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rolling Mean coalesced"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(\"EUR\", \"EUR_rolling_mean\")"},"2":{"slot":2,"type":"STRING","value":"EUR_rolling_mean_coalesced"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1945":{"id":1945,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":304,"y":224,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[1901],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_xrate"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_xrate"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"row"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1946":{"id":1946,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":480,"y":224,"width":32,"height":32,"inputConnectorIDs":[1901],"outputConnectorIDs":[1902],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"JSON_VALUE (\"row\", '$.Timestamp')"},"2":{"slot":2,"type":"STRING","value":"Timestamp"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"CAST(JSON_VALUE(\"row\", '$.EUR') AS DECIMAL(10,4))"},"2":{"slot":2,"type":"STRING","value":"EUR"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"1947":{"id":1947,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1701703136,"x":768,"y":320,"width":32,"height":32,"inputConnectorIDs":[1903],"outputConnectorIDs":[1904],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"MinMax"}}}},"visible":true},"2":{"slot":2,"name":"Groupings","elements":{},"visible":true},"3":{"slot":3,"name":"Aggregations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"datevalue"},"2":{"slot":2,"type":"STRING","value":"Min"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"datevalue"},"2":{"slot":2,"type":"STRING","value":"Max"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"1901":{"id":1901,"sourceID":1945,"targetID":1946},"1902":{"id":1902,"sourceID":1946,"targetID":1938},"1903":{"id":1903,"sourceID":1938,"targetID":1947},"1904":{"id":1904,"sourceID":1947,"targetID":1935},"1905":{"id":1905,"sourceID":1940,"targetID":1941},"1906":{"id":1906,"sourceID":1942,"targetID":1944},"1907":{"id":1907,"sourceID":1937,"targetID":1940},"1908":{"id":1908,"sourceID":1940,"targetID":1939},"1909":{"id":1909,"sourceID":1940,"targetID":1942},"1910":{"id":1910,"sourceID":1940,"targetID":1943},"1948":{"id":1948,"sourceID":1936,"targetID":1935},"1949":{"id":1949,"sourceID":1935,"targetID":1937},"1950":{"id":1950,"sourceID":1938,"targetID":1935}},"canUndo":true,"undoCommand":"Resize Note","undoCreated":1639479537608,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"1931":{"id":1931,"x":251,"y":164,"width":108,"height":118,"text":"This is a single TEXT column","colour":"00ce4f"},"1932":{"id":1932,"x":423,"y":164,"width":117,"height":117,"text":"Currency of interest","colour":"00ce4f"},"1933":{"id":1933,"x":1400,"y":123,"width":105,"height":40,"text":"IGNORE NULLS may not be supported","colour":"f9c21b"},"1934":{"id":1934,"x":1400,"y":366,"width":105,"height":40,"text":"IGNORE NULLS may not be supported","colour":"f9c21b"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":1930,"name":"example densification transformation","type":"TRANSFORMATION","tag":"1c4ef730-3cff-487f-93bc-c6458d24c5a5"},"path":["matillion-examples","densification"]}],"version":"1.48.10","environment":"synapse"}