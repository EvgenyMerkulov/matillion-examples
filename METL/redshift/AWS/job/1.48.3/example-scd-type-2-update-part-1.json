{"objects":[{"jobObject":{"JobType":".TransformationJob","id":2538,"revision":40,"created":1638791421386,"timestamp":1638791421386,"components":{"2546":{"id":2546,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":1024,"y":320,"width":32,"height":32,"inputConnectorIDs":[3342],"outputConnectorIDs":[2563],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns.","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"}}}},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"},"2":{"slot":2,"type":"STRING","value":"Desc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"rn"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2547":{"id":2547,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":1152,"y":320,"width":32,"height":32,"inputConnectorIDs":[2563],"outputConnectorIDs":[2567],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Deduplicate"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"rn"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Equal to"},"4":{"slot":4,"type":"STRING","value":"1"}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2548":{"id":2548,"inputCardinality":"ZERO_OR_MANY","outputCardinality":"MANY","implementationID":-1266674941,"x":1152,"y":464,"width":32,"height":32,"inputConnectorIDs":[3309],"outputConnectorIDs":[2561],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Current only"}}}},"visible":true},"2":{"slot":2,"name":"SQL Query","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"SELECT *\nFROM $T{dim_worldclockapi_type2}\nWHERE \"CurrentFlag\""}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2549":{"id":2549,"inputCardinality":"TWO","outputCardinality":"MANY","implementationID":-359894709,"x":1392,"y":384,"width":32,"height":32,"inputConnectorIDs":[2561,2567],"outputConnectorIDs":[3362],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Detect Changes 0"}}}},"visible":true},"2":{"slot":2,"name":"Master Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Current only"}}}},"visible":true},"3":{"slot":3,"name":"Match Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"timeZoneName"}}}},"visible":true},"4":{"slot":4,"name":"Compare Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentDateTime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"currentFileTime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"dayOfTheWeek"}}}},"visible":true},"5":{"slot":5,"name":"Output Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"master_currentDateTime"},"2":{"slot":2,"type":"STRING","value":"master_currentDateTime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"compare_currentDateTime"},"2":{"slot":2,"type":"STRING","value":"compare_currentDateTime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"master_currentFileTime"},"2":{"slot":2,"type":"STRING","value":"master_currentFileTime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"compare_currentFileTime"},"2":{"slot":2,"type":"STRING","value":"compare_currentFileTime"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"master_dayOfTheWeek"},"2":{"slot":2,"type":"STRING","value":"master_dayOfTheWeek"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"compare_dayOfTheWeek"},"2":{"slot":2,"type":"STRING","value":"compare_dayOfTheWeek"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"master_Version"},"2":{"slot":2,"type":"STRING","value":"prior_version"}}}},"visible":true},"6":{"slot":6,"name":"Indicator Column","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Indicator"}}}},"visible":true},"7":{"slot":7,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"},"3329":{"id":3329,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":804,"y":318,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[3342],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_worldclockapi_utc"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"stg_worldclockapi_utc"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"currentdatetime"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"currentfiletime"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"dayoftheweek"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"timezonename"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"3347":{"id":3347,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":795,"y":458,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[3309],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type2"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_worldclockapi_type2"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"timezonename"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"currentdatetime"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"currentfiletime"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"dayoftheweek"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"validfrom"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"validto"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"version"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"currentflag"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"3361":{"id":3361,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1536,"y":384,"width":32,"height":32,"inputConnectorIDs":[3362],"outputConnectorIDs":[3412],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add load date"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DATE_TRUNC('SECOND', SYSDATE)"},"2":{"slot":2,"type":"STRING","value":"load_timestamp"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"3411":{"id":3411,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":335239555,"x":1744,"y":384,"width":32,"height":32,"inputConnectorIDs":[3412],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rewrite tmp_worldclockapi_utc_delta"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"tmp_worldclockapi_utc_delta"}}}},"visible":true},"3":{"slot":3,"name":"Table Sort Key","elements":{},"visible":true},"4":{"slot":4,"name":"Table Distribution Style","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Even"}}}},"visible":true},"5":{"slot":5,"name":"Table Distribution Key","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING"}}}},"visible":false},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"7":{"slot":7,"name":"Sort Key Options","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Compound"}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"2561":{"id":2561,"sourceID":2548,"targetID":2549},"2563":{"id":2563,"sourceID":2546,"targetID":2547},"2567":{"id":2567,"sourceID":2547,"targetID":2549},"3342":{"id":3342,"sourceID":3329,"targetID":2546},"3309":{"id":3309,"sourceID":3347,"targetID":2548},"3362":{"id":3362,"sourceID":2549,"targetID":3361},"3412":{"id":3412,"sourceID":3361,"targetID":3411}},"canUndo":true,"undoCommand":"Set Parameter","undoCreated":1638791414050,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"2539":{"id":2539,"x":776,"y":149,"width":419,"height":40,"text":"This is a \"type 2\" dimension update.\nIt always creates a new row if anything has changed.","colour":"00ce4f"},"2540":{"id":2540,"x":715,"y":257,"width":175,"height":104,"text":"This is the new data","colour":"00ce4f"},"2541":{"id":2541,"x":714,"y":412,"width":176,"height":96,"text":"This is the existing data","colour":"00ce4f"},"2542":{"id":2542,"x":937,"y":256,"width":319,"height":105,"text":"It is important to make sure the intended primary key is unique, otherwise it can break the following change detection","colour":"f9c21b"},"2543":{"id":2543,"x":1625,"y":252,"width":231,"height":190,"text":"It is important that you do **not** update the dimension table here. If the update gets implemented as multiple DML statements the results can be non deterministic.\n\nInstead, persist the intermediate results and continue with part 2.","colour":"f9c21b"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":2538,"name":"example scd type 2 update part 1","type":"TRANSFORMATION","tag":"050a7fe3-32bd-41c5-ba9b-1280f9eed047"},"path":["matillion-examples","slowly changing dimensions"]}],"version":"1.48.3","environment":"redshift"}