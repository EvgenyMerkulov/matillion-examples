{"objects":[{"jobObject":{"JobType":".TransformationJob","id":2630,"revision":34,"created":1639493762730,"timestamp":1639493762730,"components":{"2639":{"id":2639,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":377,"y":276,"width":32,"height":32,"inputConnectorIDs":[4700],"outputConnectorIDs":[2647],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2640":{"id":2640,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1744268877,"x":473,"y":276,"width":32,"height":32,"inputConnectorIDs":[2647],"outputConnectorIDs":[2650],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Distinct 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2641":{"id":2641,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":569,"y":276,"width":32,"height":32,"inputConnectorIDs":[2650],"outputConnectorIDs":[2649],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"equipment\""},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"'Unknown'"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"'normal' /* Have to hardcode this value because it is not in the data */"},"2":{"slot":2,"type":"STRING","value":"fan_status"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2642":{"id":2642,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":729,"y":276,"width":32,"height":32,"inputConnectorIDs":[2649,4715],"outputConnectorIDs":[2689],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"},"2":{"slot":2,"type":"STRING","value":"fan"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"\"data\".\"fan_status\" = \"fan\".\"name\""},"2":{"slot":2,"type":"STRING","value":"data_Left_fan"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"data.id"},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"data.name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan.fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2643":{"id":2643,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":937,"y":276,"width":32,"height":32,"inputConnectorIDs":[2689],"outputConnectorIDs":[2648],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 1"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"NVL(\"fan_status_code\", -1)"},"2":{"slot":2,"type":"STRING","value":"fan_staus_code_with_default"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"2644":{"id":2644,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1033,"y":276,"width":32,"height":32,"inputConnectorIDs":[2648],"outputConnectorIDs":[4755],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_staus_code_with_default"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4680":{"id":4680,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":224,"y":352,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[4700,4751],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ods_iot_event"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"temperature"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4735":{"id":4735,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":384,"y":432,"width":32,"height":32,"inputConnectorIDs":[4751],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_bubble_event"}}}},"visible":true},"3":{"slot":3,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}}},"visible":true},"5":{"slot":5,"name":"Unique Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}}},"visible":true},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"7":{"slot":7,"name":"Update Strategy","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update/Insert"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4750":{"id":4750,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":736,"y":160,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[4715],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"2":{"slot":2,"name":"Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_fan_status"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"}}}},"visible":true},"4":{"slot":4,"name":"Trim Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"5":{"slot":5,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4754":{"id":4754,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":-1848704949,"x":1168,"y":272,"width":32,"height":32,"inputConnectorIDs":[4755],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"2":{"slot":2,"name":"Target Table Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"norm_equipment"}}}},"visible":true},"3":{"slot":3,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"name"},"2":{"slot":2,"type":"STRING","value":"name"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}}},"visible":true},"5":{"slot":5,"name":"Unique Keys","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}}},"visible":true},"6":{"slot":6,"name":"Schema","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_schema}"}}}},"visible":true},"7":{"slot":7,"name":"Update Strategy","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Update/Insert"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"2689":{"id":2689,"sourceID":2642,"targetID":2643},"4755":{"id":4755,"sourceID":2644,"targetID":4754},"2647":{"id":2647,"sourceID":2639,"targetID":2640},"2648":{"id":2648,"sourceID":2643,"targetID":2644},"2649":{"id":2649,"sourceID":2641,"targetID":2642},"2650":{"id":2650,"sourceID":2640,"targetID":2641},"4715":{"id":4715,"sourceID":4750,"targetID":2642},"4700":{"id":4700,"sourceID":4680,"targetID":2639},"4751":{"id":4751,"sourceID":4680,"targetID":4735}},"canUndo":true,"undoCommand":"Set Parameter","undoCreated":1639493758910,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"2631":{"id":2631,"x":341,"y":192,"width":278,"height":40,"text":"This is similar to handling a late-arriving dimension","colour":"00ce4f"},"2632":{"id":2632,"x":453,"y":415,"width":176,"height":50,"text":"This is a simple MERGE. It performs an idempotent change to the 3NF table.","colour":"00ce4f"},"2633":{"id":2633,"x":1109,"y":167,"width":123,"height":71,"text":"Not expecting many UPDATEs at this point, but they are handled if they do happen","colour":"00ce4f"},"2634":{"id":2634,"x":671,"y":101,"width":148,"height":252,"text":"Look up the fan status code.\nNote this is a **left** join","colour":"00ce4f"},"2635":{"id":2635,"x":896,"y":176,"width":177,"height":53,"text":"This is in case the left-join failed","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":2630,"name":"example datamodel ODS to 3NF","description":"","type":"TRANSFORMATION","tag":"7b2e62a7-2362-4875-a60c-bf32feed5abe"},"path":["matillion-examples","datamodel","04 3NF"]}],"version":"1.48.3","environment":"redshift"}