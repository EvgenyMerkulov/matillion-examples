{"objects":[{"jobObject":{"JobType":".TransformationJob","id":4838,"revision":54,"created":1639416245653,"timestamp":1639416245653,"components":{"4844":{"id":4844,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":546,"y":269,"width":32,"height":32,"inputConnectorIDs":[8176,8139,8155],"outputConnectorIDs":[4866],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fact_bubble_event"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"f"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_fan_status"},"2":{"slot":2,"type":"STRING","value":"df"},"3":{"slot":3,"type":"STRING","value":"Inner"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"dim_equipment"},"2":{"slot":2,"type":"STRING","value":"de"},"3":{"slot":3,"type":"STRING","value":"Inner"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"`f`.`fan_status_key` = `df`.`fan_status_key`"},"2":{"slot":2,"type":"STRING","value":"f_Inner_df"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"`f`.`equipment_key` = `de`.`equipment_key`"},"2":{"slot":2,"type":"STRING","value":"f_Inner_de"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"f.id"},"2":{"slot":2,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"f.ts"},"2":{"slot":2,"type":"STRING","value":"ts"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"f.equipment_key"},"2":{"slot":2,"type":"STRING","value":"equipment_key"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"f.fan_status_key"},"2":{"slot":2,"type":"STRING","value":"fan_status_key"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"f.date_key"},"2":{"slot":2,"type":"STRING","value":"date_key"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"f.hour_key"},"2":{"slot":2,"type":"STRING","value":"hour_key"}}},"7":{"slot":7,"values":{"1":{"slot":1,"type":"STRING","value":"df.fan_status_code"},"2":{"slot":2,"type":"STRING","value":"fan_status_code"}}},"8":{"slot":8,"values":{"1":{"slot":1,"type":"STRING","value":"df.status"},"2":{"slot":2,"type":"STRING","value":"fan_status"}}},"9":{"slot":9,"values":{"1":{"slot":1,"type":"STRING","value":"de.equipment_id"},"2":{"slot":2,"type":"STRING","value":"equipment_id"}}},"10":{"slot":10,"values":{"1":{"slot":1,"type":"STRING","value":"de.name"},"2":{"slot":2,"type":"STRING","value":"equipment_name"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4845":{"id":4845,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":674,"y":269,"width":32,"height":32,"inputConnectorIDs":[4866],"outputConnectorIDs":[8245],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Calculator 0"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"DATETIME_DIFF( `ts`,\n               LAG(`ts`, 1) OVER (PARTITION BY `equipment_key` ORDER BY `ts`),\n               MILLISECOND)\n/ 1000.0"},"2":{"slot":2,"type":"STRING","value":"bubble_frequency_s"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4847":{"id":4847,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":930,"y":269,"width":32,"height":32,"inputConnectorIDs":[8248],"outputConnectorIDs":[4867],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"date_key"},"2":{"slot":2,"type":"STRING","value":"Asc"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"hour_key"},"2":{"slot":2,"type":"STRING","value":"Asc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"hour_number"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"4849":{"id":4849,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1059,"y":273,"width":32,"height":32,"inputConnectorIDs":[4867],"outputConnectorIDs":[8405],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add natural log"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"LN(60.0 / `avg_bubble_frequency_s`)"},"2":{"slot":2,"type":"STRING","value":"ln_bpm"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"7923":{"id":7923,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":480,"y":160,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[8139],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_fan_status"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_fan_status"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_key"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_code"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"status"}}}},"visible":true},"5":{"slot":5,"name":"Dataset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_dataset}"}}}},"visible":true},"6":{"slot":6,"name":"Project","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Include Partition Time","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"8":{"slot":8,"name":"Partition Time Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"},"7968":{"id":7968,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":352,"y":272,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[8155],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fact_bubble_event"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"fact_bubble_event"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"id"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"ts"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_key"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"fan_status_key"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"date_key"}}},"6":{"slot":6,"values":{"1":{"slot":1,"type":"STRING","value":"hour_key"}}}},"visible":true},"5":{"slot":5,"name":"Dataset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_dataset}"}}}},"visible":true},"6":{"slot":6,"name":"Project","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Include Partition Time","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"8":{"slot":8,"name":"Partition Time Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"},"7972":{"id":7972,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":480,"y":384,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[8176],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_equipment"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_equipment"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_key"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"equipment_id"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"name"}}}},"visible":true},"5":{"slot":5,"name":"Dataset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_dataset}"}}}},"visible":true},"6":{"slot":6,"name":"Project","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true},"7":{"slot":7,"name":"Include Partition Time","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":false},"8":{"slot":8,"name":"Partition Time Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"},"8244":{"id":8244,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1701703136,"x":800,"y":272,"width":32,"height":32,"inputConnectorIDs":[8245],"outputConnectorIDs":[8248],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Aggregate 1"}}}},"visible":true},"2":{"slot":2,"name":"Groupings","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"date_key"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"hour_key"}}}},"visible":true},"3":{"slot":3,"name":"Aggregations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bubble_frequency_s"},"2":{"slot":2,"type":"STRING","value":"Average"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"8404":{"id":8404,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":335239555,"x":1200,"y":272,"width":32,"height":32,"inputConnectorIDs":[8405],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rewrite Table 0"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"agg_rate"}}}},"visible":true},"6":{"slot":6,"name":"Target Dataset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_dataset}"}}}},"visible":true},"100":{"slot":100,"name":"Target Project","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"[Environment Default]"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"4866":{"id":4866,"sourceID":4844,"targetID":4845},"4867":{"id":4867,"sourceID":4847,"targetID":4849},"8139":{"id":8139,"sourceID":7923,"targetID":4844},"8155":{"id":8155,"sourceID":7968,"targetID":4844},"8176":{"id":8176,"sourceID":7972,"targetID":4844},"8245":{"id":8245,"sourceID":4845,"targetID":8244},"8248":{"id":8248,"sourceID":8244,"targetID":4847},"8405":{"id":8405,"sourceID":4849,"targetID":8404}},"canUndo":true,"undoCommand":"Set Parameter","undoCreated":1639416232579,"canRedo":false,"redoCommand":"","redoCreated":1639415079333,"notes":{"4839":{"id":4839,"x":574,"y":427,"width":738,"height":40,"text":"This aggregate data is used in the \"Analysis of exponential decay\" article at [[https://www.matillion.com/resources/developer-relations]]","colour":"00ce4f"},"4840":{"id":4840,"x":731,"y":168,"width":147,"height":192,"text":"Aggregation takes the data volumes down from 144,560 rows to 176 rows","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":4838,"name":"example datamodel star to aggregate","type":"TRANSFORMATION","tag":"9ecb91d3-ff6b-4477-81fa-b15a3f56d895"},"path":["matillion-examples","datamodel","07 Aggregate"]}],"version":"1.48.7","environment":"bigquery"}