{"objects":[{"jobObject":{"JobType":".TransformationJob","id":6090,"revision":33,"created":1652866517361,"timestamp":1652866517361,"components":{"6098":{"id":6098,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1949249710,"x":568,"y":287,"width":32,"height":32,"inputConnectorIDs":[8458],"outputConnectorIDs":[6113,8500],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Replicate 0"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6100":{"id":6100,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":704,"y":224,"width":32,"height":32,"inputConnectorIDs":[6113],"outputConnectorIDs":[6114],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6101":{"id":6101,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":1408,"y":224,"width":32,"height":32,"inputConnectorIDs":[6109],"outputConnectorIDs":[6110],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Add SK"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"`sk_base` + `rowseq`"},"2":{"slot":2,"type":"STRING","value":"sk"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6102":{"id":6102,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1520,"y":224,"width":32,"height":32,"inputConnectorIDs":[6110],"outputConnectorIDs":[8534],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 1"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6144":{"id":6144,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":832,"y":160,"width":32,"height":32,"inputConnectorIDs":[6114,8482],"outputConnectorIDs":[6116],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join 0"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Business Key"},"2":{"slot":2,"type":"STRING","value":"e"},"3":{"slot":3,"type":"STRING","value":"Left"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"`n`.`bus_key_part1` = `e`.`bus_key_part1`\nAND `n`.`bus_key_part2` = `e`.`bus_key_part2`"},"2":{"slot":2,"type":"STRING","value":"n_Left_e"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part1"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"e.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"existing_bus_key_part2"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6145":{"id":6145,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":-1760161015,"x":939,"y":155,"width":32,"height":32,"inputConnectorIDs":[6116],"outputConnectorIDs":[6117],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Filter 0"}}}},"visible":true},"2":{"slot":2,"name":"Filter Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"existing_bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Is"},"3":{"slot":3,"type":"STRING","value":"Null"},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"3":{"slot":3,"name":"Combine Conditions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AND"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6146":{"id":6146,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":128170095,"x":1056,"y":160,"width":32,"height":32,"inputConnectorIDs":[6117],"outputConnectorIDs":[6106],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rename 0"}}}},"visible":true},"2":{"slot":2,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6148":{"id":6148,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1716658327,"x":944,"y":352,"width":32,"height":32,"inputConnectorIDs":[8501],"outputConnectorIDs":[6108],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"}}}},"visible":true},"2":{"slot":2,"name":"Include Input Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true},"3":{"slot":3,"name":"Calculations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"COALESCE(`max_sk`, 0)"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6149":{"id":6149,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":2139809017,"x":1165,"y":155,"width":32,"height":32,"inputConnectorIDs":[6106],"outputConnectorIDs":[6107],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"2":{"slot":2,"name":"Include input columns.","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Yes"}}}},"visible":true},"3":{"slot":3,"name":"Partition Data","elements":{},"visible":true},"4":{"slot":4,"name":"Ordering within partitions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"Asc"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"Asc"}}}},"visible":true},"5":{"slot":5,"name":"Functions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Row Number"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"6150":{"id":6150,"inputCardinality":"MANY","outputCardinality":"MANY","implementationID":-629958239,"x":1296,"y":224,"width":32,"height":32,"inputConnectorIDs":[6107,6108],"outputConnectorIDs":[6109],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Join for new SK baseline"}}}},"visible":true},"2":{"slot":2,"name":"Main Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Rank 0"}}}},"visible":true},"3":{"slot":3,"name":"Main Table Alias","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n"}}}},"visible":true},"4":{"slot":4,"name":"Joins","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Handle NULL"},"2":{"slot":2,"type":"STRING","value":"baseline"},"3":{"slot":3,"type":"STRING","value":"Inner"}}}},"visible":true},"5":{"slot":5,"name":"Join Expressions","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"1 = 1"},"2":{"slot":2,"type":"STRING","value":"n_Inner_baseline"}}}},"visible":true},"6":{"slot":6,"name":"Output Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"n.bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"n.some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"n.rowseq"},"2":{"slot":2,"type":"STRING","value":"rowseq"}}},"5":{"slot":5,"values":{"1":{"slot":1,"type":"STRING","value":"baseline.sk_base"},"2":{"slot":2,"type":"STRING","value":"sk_base"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"8441":{"id":8441,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":1354890871,"x":432,"y":288,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[8458],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"2":{"slot":2,"name":"Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"3":{"slot":3,"name":"Column Names","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"6":{"slot":6,"name":"Offset Type","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"None"}}}},"visible":true},"7":{"slot":7,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false},"8":{"slot":8,"name":"Offset","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":""}}}},"visible":false}},"exportMappings":{},"activationStatus":"ENABLED"},"8466":{"id":8466,"inputCardinality":"ZERO","outputCardinality":"MANY","implementationID":738944574,"x":484,"y":81,"width":32,"height":32,"inputConnectorIDs":[],"outputConnectorIDs":[8482],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Fixed Flow 0"}}}},"visible":true},"2":{"slot":2,"name":"Columns","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"TEXT"},"3":{"slot":3,"type":"STRING","value":""},"4":{"slot":4,"type":"STRING","value":""}}}},"visible":true},"3":{"slot":3,"name":"Values","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"AAA"},"2":{"slot":2,"type":"STRING","value":"x"},"3":{"slot":3,"type":"STRING","value":"somevalue"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"1"},"3":{"slot":3,"type":"STRING","value":"new value"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"New"},"2":{"slot":2,"type":"STRING","value":"2"},"3":{"slot":3,"type":"STRING","value":"another new value"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"8499":{"id":8499,"inputCardinality":"ONE","outputCardinality":"MANY","implementationID":1701703136,"x":832,"y":352,"width":32,"height":32,"inputConnectorIDs":[8500],"outputConnectorIDs":[8501],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Max SK"}}}},"visible":true},"2":{"slot":2,"name":"Groupings","elements":{},"visible":true},"3":{"slot":3,"name":"Aggregations","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"Max"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"},"8533":{"id":8533,"inputCardinality":"ONE","outputCardinality":"ZERO","implementationID":211954775,"x":1664,"y":224,"width":32,"height":32,"inputConnectorIDs":[8534],"outputConnectorIDs":[],"parameters":{"1":{"slot":1,"name":"Name","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example append"}}}},"visible":true},"2":{"slot":2,"name":"Target Table","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"dim_surrogate_key_example"}}}},"visible":true},"3":{"slot":3,"name":"Database","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"${examples_database}"}}}},"visible":true},"4":{"slot":4,"name":"Column Mapping","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"sk"},"2":{"slot":2,"type":"STRING","value":"sk"}}},"2":{"slot":2,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part1"},"2":{"slot":2,"type":"STRING","value":"bus_key_part1"}}},"3":{"slot":3,"values":{"1":{"slot":1,"type":"STRING","value":"bus_key_part2"},"2":{"slot":2,"type":"STRING","value":"bus_key_part2"}}},"4":{"slot":4,"values":{"1":{"slot":1,"type":"STRING","value":"some_attribute"},"2":{"slot":2,"type":"STRING","value":"some_attribute"}}}},"visible":true},"5":{"slot":5,"name":"Truncate","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"Append"}}}},"visible":true},"6":{"slot":6,"name":"Fix Data Type Mismatches","elements":{"1":{"slot":1,"values":{"1":{"slot":1,"type":"STRING","value":"No"}}}},"visible":true}},"exportMappings":{},"activationStatus":"ENABLED"}},"connectors":{"6113":{"id":6113,"sourceID":6098,"targetID":6100},"6114":{"id":6114,"sourceID":6100,"targetID":6144},"6116":{"id":6116,"sourceID":6144,"targetID":6145},"6117":{"id":6117,"sourceID":6145,"targetID":6146},"6106":{"id":6106,"sourceID":6146,"targetID":6149},"6107":{"id":6107,"sourceID":6149,"targetID":6150},"6108":{"id":6108,"sourceID":6148,"targetID":6150},"6109":{"id":6109,"sourceID":6150,"targetID":6101},"6110":{"id":6110,"sourceID":6101,"targetID":6102},"8458":{"id":8458,"sourceID":8441,"targetID":6098},"8482":{"id":8482,"sourceID":8466,"targetID":6144},"8500":{"id":8500,"sourceID":6098,"targetID":8499},"8501":{"id":8501,"sourceID":8499,"targetID":6148},"8534":{"id":8534,"sourceID":6102,"targetID":8533}},"canUndo":true,"undoCommand":"Set Parameter","undoCreated":1652866509827,"canRedo":false,"redoCommand":"","redoCreated":-1,"notes":{"6091":{"id":6091,"x":360,"y":231,"width":257,"height":121,"text":"Existing data","colour":"00ce4f"},"6092":{"id":6092,"x":360,"y":23,"width":257,"height":121,"text":"New data","colour":"00ce4f"},"6093":{"id":6093,"x":786,"y":82,"width":216,"height":137,"text":"This is an anti-join.\nIt removes any new data where the business key already exists.","colour":"00ce4f"},"6094":{"id":6094,"x":786,"y":264,"width":216,"height":137,"text":"This generates the starting value for new surrogate keys, by finding the highest one that already exists","colour":"00ce4f"},"6095":{"id":6095,"x":1235,"y":151,"width":323,"height":132,"text":"Generate new SKs","colour":"00ce4f"},"6096":{"id":6096,"x":1576,"y":150,"width":172,"height":132,"text":"Append","colour":"00ce4f"}},"noteConnectors":{},"variables":{},"grids":{}},"info":{"id":6090,"name":"example surrogate key pattern transform","description":"Demonstrates the surrogate key generator pattern","type":"TRANSFORMATION","tag":"eddfc64d-e6ec-46b2-a01f-d054183c3378"},"path":["matillion-examples","feature engineering"]}],"version":"1.56.10","environment":"deltalake"}